{"ast":null,"code":"import \"core-js/modules/es.error.cause.js\";\nimport authorizationAPI from \"./../apis/authorization\";\nimport { Toast } from \"./../utils/helpers\";\nexport default {\n  data() {\n    return {\n      email: \"\",\n      password: \"\",\n      isProcessing: false\n    };\n  },\n\n  methods: {\n    async handleSubmit() {\n      try {\n        //先透過前段做帳號密碼的第一道防線\n        if (!this.email || !this.password) {\n          Toast.fire({\n            icon: \"warning\",\n            title: \"請輸入您的帳號密碼\"\n          });\n          return;\n        }\n\n        this.isProcessing = true; // 原本的.then start--\n\n        const response = await authorizationAPI.signIn({\n          email: this.email,\n          password: this.password\n        });\n        const {\n          data\n        } = response;\n\n        if (data.status !== \"success\") {\n          throw new Error(data.message);\n        } // 將 token 放到 localStorage\n\n\n        localStorage.setItem(\"token\", data.token); //將資料傳到 vuex 中\n\n        this.$store.commit(\"setCurrentUser\", data.user); // 成功登入後轉址到餐廳首頁\n\n        this.$router.push(\"/\"); // 原本的.then end--\n      } catch (error) {\n        this.isProcessing = false;\n        this.password = \"\";\n        Toast.fire({\n          icon: \"warning\",\n          title: \"輸入的帳號密碼有誤\"\n        });\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":";AAuDA;AACA;AACA;EACAA;IACA;MACAC,SADA;MAEAC,YAFA;MAGAC;IAHA;EAKA,CAPA;;EAQAC;IACA;MACA;QACA;QACA;UACAC;YACAC,eADA;YAEAC;UAFA;UAIA;QACA;;QACA,yBATA,CAUA;;QACA;UACAN,iBADA;UAEAC;QAFA;QAIA;UAAAF;QAAA;;QACA;UACA;QACA,CAlBA,CAmBA;;;QACAQ,0CApBA,CAqBA;;QACA,gDAtBA,CAuBA;;QACA,uBAxBA,CAyBA;MACA,CA1BA,CA0BA;QACA;QACA;QACAH;UACAC,eADA;UAEAC;QAFA;MAIA;IACA;;EApCA;AARA","names":["data","email","password","isProcessing","methods","Toast","icon","title","localStorage"],"sourceRoot":"src/views","sources":["SignIn.vue"],"sourcesContent":["<template>\n<div id=\"signin\">\n  <div class=\"container py-5\">\n      <h1 class=\"h3 mb-3 font-weight-normal\">登入會員</h1>\n    <form class=\"signin-form\" @submit.prevent.stop=\"handleSubmit\">\n\n      <div class=\"form-label-group mb-2\">\n        <label for=\"email\">帳號</label>\n        <input\n          id=\"email\"\n          v-model=\"email\"\n          name=\"email\"\n          type=\"email\"\n          class=\"form-control\"\n          placeholder=\"email\"\n          autocomplete=\"username\"\n          required\n          autofocus\n        />\n      </div>\n\n      <div class=\"form-label-group mb-3\">\n        <label for=\"password\">密碼</label>\n        <input\n          id=\"password\"\n          v-model=\"password\"\n          name=\"password\"\n          type=\"password\"\n          class=\"form-control\"\n          placeholder=\"Password\"\n          autocomplete=\"current-password\"\n          required\n        />\n      </div>\n\n      <button\n        class=\"btnSignin btn-lg btn-primary btn-block mb-3\"\n        type=\"submit\"\n        :disabled=\"isProcessing\"\n      >\n        登入\n      </button>\n\n      <div class=\"btnSignup text-center mb-3\">\n        <p>\n          <router-link to=\"/signup\">註冊會員</router-link>\n        </p>\n      </div>\n\n      <p class=\"mt-5 mb-3 text-muted text-center\">&copy; 2021-2022</p>\n    </form>\n  </div>\n  </div>\n</template>\n<script>\nimport authorizationAPI from \"./../apis/authorization\";\nimport { Toast } from \"./../utils/helpers\";\nexport default {\n  data() {\n    return {\n      email: \"\",\n      password: \"\",\n      isProcessing: false,\n    };\n  },\n  methods: {\n    async handleSubmit() {\n      try {\n        //先透過前段做帳號密碼的第一道防線\n        if (!this.email || !this.password) {\n          Toast.fire({\n            icon: \"warning\",\n            title: \"請輸入您的帳號密碼\",\n          });\n          return;\n        }\n        this.isProcessing = true;\n        // 原本的.then start--\n        const response = await authorizationAPI.signIn({\n          email: this.email,\n          password: this.password,\n        });\n        const { data } = response;\n        if (data.status !== \"success\") {\n          throw new Error(data.message);\n        }\n        // 將 token 放到 localStorage\n        localStorage.setItem(\"token\", data.token);\n        //將資料傳到 vuex 中\n        this.$store.commit(\"setCurrentUser\", data.user);\n        // 成功登入後轉址到餐廳首頁\n        this.$router.push(\"/\");\n        // 原本的.then end--\n      } catch (error) {\n        this.isProcessing = false;\n        this.password = \"\";\n        Toast.fire({\n          icon: \"warning\",\n          title: \"輸入的帳號密碼有誤\",\n        });\n      }\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n@import \"./../styles/variables.scss\";\n#signin {\n  margin-top: 65px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\nh1 {\n  margin-top: 25px;\n  font-weight: bold;\n  color: #728C37;\n  font-size: 23px;\n}\n\nlabel {\n  position: absolute;\n  color: #BAB649;\n  font-size: 15px;\n  font-weight: 500;\n  display: block;\n  width: 100%;\n  padding-left: 11px;\n}\n\n.placeholder {\n  position: absolute;\n  left: 0.625rem;\n  top: 0.313rem;\n  color: #BAB649;\n  font-size: 15px;\n  font-weight: 500;\n  line-height: 15px;\n}\n\n.invalid {\n  border-bottom: 2px solid #fc5a5a;\n}\n\ninput {\n  width: 540px;\n  height: 52px;\n  border-radius: 4px;\n  background-color: $formBgColor;\n  margin-bottom: 2em;\n  padding: 1.3em 0 0 1em;\n  font-size: 19px;\n  font-weight: 500;\n  border: none;\n  border-bottom: 2px solid $secondaryTextColor;\n  &:focus,\n  &:hover {\n    border-bottom: 2px solid #50b5ff;\n  }\n}\n\n.form-label-group {\n  position: relative;\n}\n.btnSignin {\n  width: 540px;\n  height: 50px;\n  border-radius: 50px;\n  background-color: #728C37;\n  font-size: 18px;\n  font-weight: 700;\n  color: $white;\n  margin-top: 2em;\n  padding: 0.625rem 2.5rem;\n  border: none;\n  &:disabled {\n    opacity: 0.7;\n  }\n}\n</style>"]},"metadata":{},"sourceType":"module"}